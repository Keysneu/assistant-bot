# AssistantBot

<div align="center">

![AssistantBot](https://img.shields.io/badge/AssistantBot-v0.1.0-blue)
![Python](https://img.shields.io/badge/Python-3.10+-green)
![React](https://img.shields.io/badge/React-19-cyan)
![License](https://img.shields.io/badge/License-MIT-yellow)

**åŸºäº RAG çš„æœ¬åœ°æ™ºèƒ½å¯¹è¯åŠ©æ‰‹**

ä¸“ä¸º Mac M3 ä¼˜åŒ–çš„å…¨æ ˆç§æœ‰çŸ¥è¯†åº“å¯¹è¯ç³»ç»Ÿ

[åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) â€¢ [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„) â€¢ [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)

</div>

---

## é¡¹ç›®ç®€ä»‹

AssistantBot æ˜¯ä¸€ä¸ªå·¥ä¸šçº§çš„ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰å¯¹è¯ç³»ç»Ÿï¼Œå®Œå…¨è¿è¡Œåœ¨æœ¬åœ°ï¼Œä¿éšœæ•°æ®éšç§ã€‚é¡¹ç›®åˆ©ç”¨ Mac M3 çš„ Metal GPU åŠ é€Ÿèƒ½åŠ›ï¼Œå®ç°äº†é«˜æ€§èƒ½çš„æœ¬åœ° LLM æ¨ç†ï¼Œé…åˆ ChromaDB å‘é‡æ•°æ®åº“å’Œ React ç°ä»£åŒ–å‰ç«¯ï¼Œæä¾› ChatGPT çº§åˆ«çš„äº¤äº’ä½“éªŒã€‚

### æ ¸å¿ƒäº®ç‚¹

- **å®Œå…¨æœ¬åœ°è¿è¡Œ**ï¼šæ— éœ€è”ç½‘ï¼Œæ‰€æœ‰æ•°æ®å’Œæ¨¡å‹å‡åœ¨æœ¬åœ°å¤„ç†ï¼Œä¿éšœéšç§å®‰å…¨
- **Mac M3 ä¼˜åŒ–**ï¼šå……åˆ†åˆ©ç”¨ Metal GPU åŠ é€Ÿï¼Œæ¨ç†é€Ÿåº¦æå‡ 3-5 å€
- **æ··åˆé—®ç­”æ¨¡å¼**ï¼šä¼˜å…ˆä½¿ç”¨çŸ¥è¯†åº“å†…å®¹ï¼Œæ— ç›¸å…³å†…å®¹æ—¶è‡ªåŠ¨åˆ‡æ¢ä¸ºè‡ªç”±å¯¹è¯
- **æµå¼å“åº”**ï¼šSSE å®æ—¶æµå¼è¾“å‡ºï¼Œç”¨æˆ·ä½“éªŒæµç•…
- **å¤šæ ¼å¼æ”¯æŒ**ï¼šæ”¯æŒ TXTã€PDFã€MDã€HTML ç­‰å¤šç§æ–‡æ¡£æ ¼å¼
- **ä¼šè¯ç®¡ç†**ï¼šæ”¯æŒå¤šä¼šè¯ç®¡ç†ã€å†å²è®°å½•æŸ¥çœ‹ä¸åˆ‡æ¢

---

## åŠŸèƒ½ç‰¹æ€§

### å¯¹è¯åŠŸèƒ½
- ğŸ¤– **æ™ºèƒ½é—®ç­”**ï¼šåŸºäºä¸Šä¼ æ–‡æ¡£çš„æ™ºèƒ½æ£€ç´¢ä¸å›ç­”
- ğŸ’¬ **å¤šè½®å¯¹è¯**ï¼šæ”¯æŒä¸Šä¸‹æ–‡ç†è§£çš„è¿ç»­å¯¹è¯
- ğŸ”„ **æµå¼è¾“å‡º**ï¼šå®æ—¶æ˜¾ç¤º AI å›å¤è¿‡ç¨‹
- ğŸ“ **ä¼šè¯ç®¡ç†**ï¼šåˆ›å»ºã€åˆ‡æ¢ã€åˆ é™¤å¤šä¸ªå¯¹è¯ä¼šè¯

### çŸ¥è¯†åº“åŠŸèƒ½
- ğŸ“„ **æ–‡æ¡£ä¸Šä¼ **ï¼šæ”¯æŒæ‹–æ‹½ä¸Šä¼ æœ¬åœ°æ–‡æ¡£
- ğŸŒ **URL å¯¼å…¥**ï¼šæ”¯æŒç›´æ¥æŠ“å–ç½‘é¡µå†…å®¹
- ğŸ“Š **å‘é‡å­˜å‚¨**ï¼šåŸºäº ChromaDB çš„æŒä¹…åŒ–å‘é‡æ£€ç´¢
- ğŸ—‘ï¸ **æ–‡æ¡£ç®¡ç†**ï¼šæŸ¥çœ‹ã€åˆ é™¤å·²ä¸Šä¼ çš„æ–‡æ¡£

### æ”¯æŒçš„æ–‡æ¡£æ ¼å¼
| æ ¼å¼ | è¯´æ˜ |
|------|------|
| `.txt` | çº¯æ–‡æœ¬æ–‡ä»¶ |
| `.md` | Markdown æ–‡æ¡£ |
| `.pdf` | PDF æ–‡æ¡£ï¼ˆè‡ªåŠ¨æå–æ–‡æœ¬ï¼‰ |
| `.html/.htm` | ç½‘é¡µæ–‡ä»¶ï¼ˆè‡ªåŠ¨æ¸…æ´—å†…å®¹ï¼‰ |

---

## æŠ€æœ¯æ¶æ„

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Frontend                            â”‚
â”‚                    (React + Vite + Tailwind)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ChatBox     â”‚  â”‚   Document   â”‚  â”‚   SessionList   â”‚  â”‚
â”‚  â”‚  (å¯¹è¯ç»„ä»¶)   â”‚  â”‚   Manager    â”‚  â”‚   (ä¼šè¯ç®¡ç†)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ SSE / REST API
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Backend (FastAPI)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  /api/chat   â”‚  â”‚  /api/upload â”‚  â”‚  /api/health     â”‚  â”‚
â”‚  â”‚  (å¯¹è¯æ¥å£)   â”‚  â”‚  (æ–‡æ¡£ä¸Šä¼ )   â”‚  â”‚  (å¥åº·æ£€æŸ¥)      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Llama.cpp    â”‚    â”‚ ChromaDB      â”‚    â”‚ GTE-large     â”‚
â”‚  (Qwen2.5-7B) â”‚    â”‚ (å‘é‡æ•°æ®åº“)   â”‚    â”‚ (Embedding)   â”‚
â”‚  Metal GPU    â”‚    â”‚               â”‚    â”‚ MPS åŠ é€Ÿ      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

#### åç«¯
| ç»„ä»¶ | é€‰å‹ | è¯´æ˜ |
|------|------|------|
| Web æ¡†æ¶ | **FastAPI** | é«˜æ€§èƒ½å¼‚æ­¥æ¡†æ¶ï¼Œæ”¯æŒ SSE |
| LLM æ¨ç† | **Llama.cpp** | Python ç»‘å®šï¼ŒMetal GPU åŠ é€Ÿ |
| æ¨¡å‹ | **Qwen2.5-7B-Instruct** | GGUF Q3_K_M é‡åŒ–æ ¼å¼ |
| å‘é‡æ•°æ®åº“ | **ChromaDB** | æœ¬åœ°æŒä¹…åŒ–å­˜å‚¨ |
| Embedding | **thenlper/gte-large** | MPS è®¾å¤‡åŠ é€Ÿ |

#### å‰ç«¯
| ç»„ä»¶ | é€‰å‹ | è¯´æ˜ |
|------|------|------|
| æ¡†æ¶ | **React 19** | æœ€æ–°ç‰ˆæœ¬ |
| æ„å»ºå·¥å…· | **Vite** | æé€Ÿå¼€å‘ä½“éªŒ |
| æ ·å¼ | **Tailwind CSS** | åŸå­åŒ– CSS |
| ç»„ä»¶åº“ | **Shadcn/UI** | é«˜è´¨é‡ UI ç»„ä»¶ |
| Markdown | **react-markdown** | Markdown æ¸²æŸ“ |

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: macOS (Apple Silicon M1/M2/M3)
- **Python**: 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Node.js**: 18.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **å†…å­˜**: å»ºè®® 16GB åŠä»¥ä¸Š
- **ç£ç›˜ç©ºé—´**: è‡³å°‘ 10GB å¯ç”¨ç©ºé—´

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd assistant-bot
```

### 2. åç«¯è®¾ç½®

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# å®‰è£…ä¾èµ–ï¼ˆMac M3 Metal ä¼˜åŒ–ç‰ˆï¼‰
CMAKE_ARGS="-DLLAMA_METAL=on" pip install -r requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®æ¨¡å‹è·¯å¾„ç­‰å‚æ•°
```

### 3. ä¸‹è½½æ¨¡å‹

```bash
# æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Hugging Face Hub
pip install huggingface_hub
huggingface-cli download Qwen/Qwen2.5-7B-Instruct-GGUF qwen2.5-7b-instruct-q3_k_m.gguf --local-dir ./models

# æ–¹æ³•äºŒï¼šæ‰‹åŠ¨ä¸‹è½½
# ä» https://huggingface.co/Qwen/Qwen2.5-7B-Instruct-GGUF ä¸‹è½½
# å°† qwen2.5-7b-instruct-q3_k_m.gguf æ”¾å…¥ backend/models/ ç›®å½•
```

### 4. å‰ç«¯è®¾ç½®

```bash
# æ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œè¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

### 5. å¯åŠ¨åç«¯

```bash
# åœ¨åç«¯ç›®å½•ä¸‹å¯åŠ¨æœåŠ¡
cd backend
source venv/bin/activate
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 6. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®: **http://localhost:5173**

---

## é¡¹ç›®ç»“æ„

```
assistant-bot/
â”œâ”€â”€ backend/                    # åç«¯ FastAPI æœåŠ¡
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/               # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ chat.py        # å¯¹è¯æ¥å£ (SSE æµå¼)
â”‚   â”‚   â”‚   â”œâ”€â”€ upload.py      # æ–‡æ¡£ä¸Šä¼ æ¥å£
â”‚   â”‚   â”‚   â””â”€â”€ health.py      # å¥åº·æ£€æŸ¥æ¥å£
â”‚   â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”‚   â””â”€â”€ config.py      # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â””â”€â”€ schema.py      # Pydantic æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ llm_service.py      # LLM æ¨ç†æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ embedding_service.py # Embedding æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ rag_service.py      # RAG æ£€ç´¢æœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ session_service.py  # ä¼šè¯ç®¡ç†æœåŠ¡
â”‚   â”‚   â””â”€â”€ main.py            # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ models/                # GGUF æ¨¡å‹æ–‡ä»¶å­˜æ”¾ç›®å½•
â”‚   â”œâ”€â”€ data/                  # æ•°æ®å­˜å‚¨ç›®å½•
â”‚   â”‚   â”œâ”€â”€ chroma_db/         # ChromaDB å‘é‡æ•°æ®åº“
â”‚   â”‚   â””â”€â”€ sessions.json      # ä¼šè¯è®°å½•
â”‚   â”œâ”€â”€ requirements.txt       # Python ä¾èµ–
â”‚   â””â”€â”€ .env.example           # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚
â”œâ”€â”€ frontend/                  # å‰ç«¯ React åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/        # React ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatBox.tsx       # å¯¹è¯æ¡†ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentManager.tsx # æ–‡æ¡£ç®¡ç†ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ SessionList.tsx    # ä¼šè¯åˆ—è¡¨ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ui/                # UI åŸºç¡€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ hooks/             # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ useSessions.ts     # ä¼šè¯ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ use-toast.ts       # æç¤ºé€šçŸ¥
â”‚   â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts            # API å®¢æˆ·ç«¯
â”‚   â”‚   â”‚   â””â”€â”€ utils.ts          # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â””â”€â”€ index.ts          # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ App.tsx              # åº”ç”¨ä¸»ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.tsx             # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ package.json            # Node ä¾èµ–
â”‚   â””â”€â”€ vite.config.ts          # Vite é…ç½®
â”‚
â”œâ”€â”€ CLAUDE.md                  # Claude Code å¼€å‘æŒ‡å—
â”œâ”€â”€ README.md                  # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â””â”€â”€ .gitignore                 # Git å¿½ç•¥é…ç½®
```

---

## å¼€å‘æŒ‡å—

### åç«¯å¼€å‘

#### æ·»åŠ æ–°çš„ API ç«¯ç‚¹

```python
# backend/app/api/new_endpoint.py
from fastapi import APIRouter, Depends
from app.models.schema import ChatRequest

router = APIRouter()

@router.post("/new-endpoint")
async def new_endpoint(request: ChatRequest):
    """æ–°çš„ API ç«¯ç‚¹"""
    return {"status": "success"}
```

#### ä¿®æ”¹ RAG æ£€ç´¢å‚æ•°

ç¼–è¾‘ `backend/app/core/config.py`:

```python
class Settings(BaseSettings):
    # RAG å‚æ•°è°ƒæ•´
    CHUNK_SIZE: int = 800          # æ–‡æ¡£åˆ‡å—å¤§å°
    CHUNK_OVERLAP: int = 200       # å—é‡å å¤§å°
    RETRIEVAL_K: int = 4           # æ£€ç´¢å—æ•°é‡
    MIN_RELEVANCE_SCORE: float = 0.20  # æœ€ä½ç›¸å…³åº¦é˜ˆå€¼
```

### å‰ç«¯å¼€å‘

#### æ·»åŠ æ–°çš„ UI ç»„ä»¶

```tsx
// frontend/src/components/ui/NewComponent.tsx
import { cn } from "@/lib/utils";

interface NewComponentProps {
  className?: string;
}

export function NewComponent({ className }: NewComponentProps) {
  return (
    <div className={cn("base-styles", className)}>
      {/* ç»„ä»¶å†…å®¹ */}
    </div>
  );
}
```

#### API è°ƒç”¨ç¤ºä¾‹

```typescript
// frontend/src/lib/api.ts
export async function callApi(endpoint: string, data: any) {
  const response = await fetch(`${API_BASE_URL}${endpoint}`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(data),
  });
  return response.json();
}
```

### å¸¸ç”¨å‘½ä»¤

```bash
# åç«¯
cd backend
source venv/bin/activate
uvicorn app.main:app --reload          # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python test_api.py                     # æµ‹è¯• API
python test_rag_accuracy.py            # æµ‹è¯• RAG å‡†ç¡®ç‡

# å‰ç«¯
cd frontend
npm run dev                            # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run build                          # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run lint                           # ä»£ç æ£€æŸ¥

# æ¸…ç†å‘é‡æ•°æ®åº“
rm -rf backend/data/chroma_db
```

---

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡ (.env)

```bash
# API è®¾ç½®
API_V1_PREFIX=/api
PROJECT_NAME=AssistantBot
VERSION=0.1.0

# CORS é…ç½®
CORS_ORIGINS=["http://localhost:5173","http://localhost:3000"]

# LLM æ¨¡å‹é…ç½®
MODEL_PATH=./models/qwen2.5-7b-instruct-q3_k_m.gguf
N_GPU_LAYERS=-1          # -1 è¡¨ç¤ºå…¨éƒ¨å¸è½½åˆ° GPU
N_CTX=4096               # ä¸Šä¸‹æ–‡çª—å£å¤§å°
TEMPERATURE=0.7          # ç”Ÿæˆæ¸©åº¦
MAX_TOKENS=2048          # æœ€å¤§ç”Ÿæˆ token æ•°

# Embedding é…ç½®
EMBEDDING_MODEL=thenlper/gte-large
EMBEDDING_DEVICE=mps     # Apple Silicon Neural Engine

# RAG é…ç½®
CHUNK_SIZE=800
CHUNK_OVERLAP=200
RETRIEVAL_K=4
MIN_RELEVANCE_SCORE=0.20

# æ•°æ®å­˜å‚¨
CHROMA_PERSIST_DIR=./data/chroma_db
COLLECTION_NAME=documents
```

---

## API æ–‡æ¡£

å¯åŠ¨åç«¯æœåŠ¡åï¼Œè®¿é—®ä»¥ä¸‹åœ°å€æŸ¥çœ‹å®Œæ•´ API æ–‡æ¡£ï¼š

- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

### æ ¸å¿ƒ API ç«¯ç‚¹

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/api/chat/stream` | POST | SSE æµå¼å¯¹è¯ |
| `/api/documents/upload` | POST | ä¸Šä¼ æ–‡æ¡£ |
| `/api/documents/ingest-url` | POST | å¯¼å…¥ç½‘é¡µå†…å®¹ |
| `/api/documents` | GET | è·å–æ–‡æ¡£åˆ—è¡¨ |
| `/api/documents/{id}` | DELETE | åˆ é™¤æ–‡æ¡£ |
| `/api/sessions` | GET | è·å–ä¼šè¯åˆ—è¡¨ |
| `/api/health` | GET | å¥åº·æ£€æŸ¥ |

---

## å¸¸è§é—®é¢˜

### Q: æ¨¡å‹åŠ è½½å¾ˆæ…¢æ€ä¹ˆåŠï¼Ÿ
A: é¦–æ¬¡åŠ è½½æ¨¡å‹éœ€è¦ 1-2 åˆ†é’Ÿï¼Œåç»­ä¼šç¼“å­˜åˆ°å†…å­˜ã€‚å¯ä»¥å°è¯•ä½¿ç”¨æ›´å°çš„é‡åŒ–æ¨¡å‹ï¼ˆå¦‚ Q4_K_Mï¼‰æ¥åŠ å¿«åŠ è½½é€Ÿåº¦ã€‚

### Q: Metal GPU åŠ é€Ÿä¸ç”Ÿæ•ˆï¼Ÿ
A: ç¡®ä¿å®‰è£…æ—¶ä½¿ç”¨äº† `CMAKE_ARGS="-DLLAMA_METAL=on"` å‚æ•°ï¼Œå¹¶æ£€æŸ¥ `n_gpu_layers=-1` é…ç½®ã€‚

### Q: ç½‘é¡µæŠ“å–å¤±è´¥ï¼Ÿ
A: æŸäº›ç½‘ç«™å¯èƒ½æœ‰åçˆ¬è™«æœºåˆ¶ï¼Œå»ºè®®ç›´æ¥å¤åˆ¶å†…å®¹åˆ°æ–‡æœ¬æ–‡ä»¶åä¸Šä¼ ã€‚

### Q: å‘é‡æ£€ç´¢ç»“æœä¸ç›¸å…³ï¼Ÿ
A: å¯ä»¥å°è¯•è°ƒæ•´ `CHUNK_SIZE`ã€`RETRIEVAL_K` å’Œ `MIN_RELEVANCE_SCORE` å‚æ•°ã€‚

---

## å¼€å‘è·¯çº¿å›¾

- [x] Phase 1: FastAPI + Llama.cpp åŸºç¡€å¯¹è¯
- [x] Phase 2: ChromaDB å‘é‡æ£€ç´¢
- [x] Phase 3: React å‰ç«¯ç•Œé¢
- [x] Phase 4: æ–‡æ¡£ä¸Šä¼ ä¸ç®¡ç†
- [ ] Phase 5: å¤šæ¨¡æ€æ”¯æŒï¼ˆå›¾ç‰‡ï¼‰
- [ ] Phase 6: è¯­éŸ³äº¤äº’
- [ ] Phase 7: Agent è”ç½‘æœç´¢

---

## è®¸å¯è¯

MIT License

---

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

<div align="center">

**Built with â¤ï¸ for Mac M3**

</div>
